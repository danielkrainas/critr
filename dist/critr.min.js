/*!
 * critr 0.1.0. (https://github.com/danielkrainas/critr)
 * Copyright 2015 Daniel Krainas
 */
!function(a,b){function c(){return!0}function d(a){for(var b in n){var c=n[b];c===!0?f(b,a):e(b,c,a)}}function e(a,b,c){if(a="$"+a,a in o){if(!c)return!1;o[a]=b}else o[a]=b;return!0}function f(a,b){return e(a,c,b)}function g(){o={}}function h(){g(),d()}function i(a,b){for(var c=b.split("."),d=0;d<c.length;d++){if("undefined"==typeof a[c[d]])return null;a=a[c[d]]}return a}function j(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b}function k(a,b){if(null!==a&&null!==b&&"object"==typeof a&&"object"==typeof b){var c=j(a),d=j(b);if(c.length===d.length){var e=function(a,b){return a.key>b.key};c.sort(e),d.sort(e);var f;for(f=0;f<c.length;f++){var g=c[f],h=h[f];if(!k(g.key,h.key)||!k(g.value,h.value))return!1}return!0}return!1}return a===b}function l(a){return Array.isArray(a)?a:[a]}function m(a,b){var c=!1;for(var d in b){var e=b[d];if("$"!==d[0])c="object"!=typeof e?k(i(a,d),e):m(i(a,d),e);else{if(!(d in o))throw new Error(d+" operator is not supported.");c=o[d](e,a,b)}if(!c)break}return c}var n={and:function(a,b){return a.reduce(function(a,c){return a&&m(b,c)},!0)},or:function(a,b){return a.reduce(function(a,c){return a||m(b,c)},!1)},nor:function(a,b){return a.reduce(function(a,c){return a&&!m(b,c)},!0)},not:function(a,b){return!m(b,a)},eq:function(a,b){return k(b,a)},ne:function(a,b){return!k(b,a)},lt:function(a,b){return a>b},lte:function(a,b){return a>=b},gt:function(a,b){return b>a},gte:function(a,b){return b>=a},"in":function(a,b){var c=l(b);return l(a).some(function(a){return c.indexOf(a)>=0})},nin:function(a,b){var c=l(b);return l(a).every(function(a){return c.indexOf(a)<0})},exists:function(a,b){return!(a^null!==b)},type:function(a,b){return typeof b===a},mod:function(a,b){return b%a[0]===a[1]},regex:function(a,b,c){var d=a;return d instanceof RegExp||(d=new RegExp(d,c.$options)),null!==b.match(d)},options:!0,where:function(a,b){return a.call(null,b)},all:function(a,b){var c=l(b);return a.every(function(a){return c.indexOf(a)>=0})},elemMatch:function(a,b){return Array.isArray(b)&&b.some(function(b){return m(b,a)})},size:function(a,b){return a===(Array.isArray(b)?b.length:0)}},o={};d(!0),b.registerDefaults=d,b.registerOp=e,b.registerValueOp=f,b.clearRegistration=g,b.resetOps=h,b.test=m}(this,"undefined"!=typeof exports?exports:this.Critr={});